### IP(Internet Protocol) 주소
Host에 대한 식별자, 네트워크에 있는 컴퓨터나 장치의 식별

### IPv4
IPv4 주소란, 인터넷 프로토콜 버전 4에서 사용되는 주소 체계로 모든 컴퓨터 또는 기기가 인터넷에 연결될 때
고유하게 할당되는 식별자다. 32비트로 구성되어있고 8비트 단위로 점을 찍어서 표기한다.  
0.0.0.0 ~ 255.255.255.255

### 클래스 기반 할당 방식 (Classful IP)
32비트를 8비트로 4개의 필드로 구성을 하는데 이를 통해 네티워크 주소와 호스트 주소를 구분할 수 있다.  
필드를 '옥텟'이라고 합니다.  

![image](https://github.com/hong-gp/study/assets/127091213/0b8aa58a-2751-4d32-b0d8-8dc64e389361)  

A ~ E 클래스가 존재한다. D클래스는 멀티캐스트를 위해, E 클래스는 실험 및 연구 목적으로 예약되어있다. 
특수 목적을 위한 클래스이기 때문에 이런게 있다 정도만 알면 된다.  
<br/>

|클래스|범위|2진수|
|------|---|------|
|클래스 A|0.0.0.0 ~ 127.255.255.255|0xxxxxxx.xxxxxxxx.xxxxxxxx.xxxxxxxx|
|클래스 B|128.0.0.0 ~ 191.255.255.255|10xxxxxx.xxxxxxxx.xxxxxxxx.xxxxxxxx|
|클래스 C|192.0.0.0 ~ 223.255.255.255|110xxxxx.xxxxxxxx.xxxxxxxx.xxxxxxxx|
|클래스 D|224.0.0.0 ~ 239.255.255.255|1110xxxx.xxxxxxxx.xxxxxxxx.xxxxxxxx|
|클래스 E|240.0.0.0 ~ 255.255.255.255|1111xxxx.xxxxxxxx.xxxxxxxx.xxxxxxxx|

#### 클래스 A
클래스 A에 속하는 IP주소는 많은 수의 호스트를 포함하는 네트워크에 할당된다.  
- 네트워크 주소의 길이는 8비트
- 호스트 주소의 길이는 24비트
- 0.0.0.0 ~ 127.255.255.255의 범위를 가진다.
- 네트워크 주소의 개수는 0 ~ 127 = 128 개
- 호스트 주소의 개수는 2^24 - 2 = 16,777,214 개
- 첫 번째 옥텟의 상위 비트는 항상 0이고 나머지 7비트는 네트워크 주소를 결정할 때 사용된다.
- 호스트 주소는 모든 네트워크에서 호스트를 결정하는데 사용된다.

128개의 네트워크 주소를 구분할 수 있고, 각 네트워크 마다 16,777,214개의 컴퓨터를 구분할 수 있다.
<br/>

#### 클래스 B
클래스 B에 속하는 IP 주소는 중형 네트워크부터 대규모 네트워크까지의 네트워크에 할당된다.
- 네트워크 주소의 길이는 16비트
- 호스트 주소의 길이는 16비트
- 128.0.0.0 ~ 191.255.255.255의 범위를 가진다.
- 네트워크 주소의 개수는 2^14 = 16384
- 호스트 주소의 개수는 2^16 - 2 = 65534
- 첫 번째 옥텟의 상위 비트는 항상 10이다. 나머지 14비트는 네트워크 주소를 결정할 때 사용한다.

<br/>

#### 클래스 C
클래스 C에 속하는 IP 주소는 소규모 네트워크에 할당된다. 보통 많이 쓴다.
- 네트워크 주소의 길이는 24비트
- 호스트 주소의 길이는 8비트
- 192.0.0.0 ~ 223.255.255.255의 범위
- 네트워크 주소의 개수는 2^21 = 2097152
- 호스트 주소의 개수는 2^8 - 2 = 254
- 첫 번째 옥텟의 상위 비트는 항상 110이다.

<br/>

### 호스트 주소 할당 규칙
호스트 주소는 네트워크 내에서 호스트를 식별할 때 사용한다.  
- 모든 네트워크 내에서 호스트 주소는 해당 네트워크에 대해 고유해야 한다.
- 모든 비트가 0으로 설정된 경우에는 해당 IP 주소의 네트워크 주소를 나타내는데 사용한다. (192.0.0.0)
- 모든 비트가 1로 설정된 경우에는 해당 IP 주소의 브로드 캐스트 주소로 예약되어 있다. (192.255.255.255)

<br/>

### Classful 방식의 문제점
IP 주소가 낭비된다. 클래스 C를 사용한다면 10대의 컴퓨터가 있는 PC방이 있을 때, 10개의 호스트 주소만 있으면 되는데
클래스로 할당하면 200개가 넘는 호스트 주소가 낭비된다.

<br/>

### 서브넷 마스크
서브넷 마스크는 IP 주소를 네트워크 주소 / 호스트 주소로 나누는데 사용되는 숫자 조합이다. 
서브넷 마스크는 IP 주소와 같은 길이의 비트로 구성되며, 이진수로 표현했을 때 네트워크는 1, 호스트는 0으로 설정된다.  
<br/>

IP 주소가 192.168.123.132의 서브넷 마스크가 255.255.255.0 일 때,  
192.168.123.132 &nbsp;&nbsp;&nbsp;=&nbsp;&nbsp;&nbsp; 11000000.10101000.01111011.10000100  
255.255.255.0 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;&nbsp;&nbsp; 11111111.11111111.11111111.00000000  
1인 부분을 네트워크, 0인 부분은 호스트를 나타내므로 IP 주소에 서브넷 마스크를 씌우면 나오는 결과가 서브넷이 된다.  
192.168.123.0 = 11000000.10101000.01111011.00000000  
이 과정을 서브넷팅이라고 한다.

<br/>

## DHCP (Dynamic Host Configuration Protocol)
컴퓨터의 IP 주소를 할당하는 방법에는 두 가지가 있다.  
고정(Static) IP와 동적(Dynamic) IP  
고정 IP는 사용자가 수동으로 IP 주소를 할당하는 것인데 사용자가 컴퓨터의 네트워크 구성 페이지를 열어서
수동으로 IP 주소를 입력해야했다.  
동적 IP는 컴퓨터가 DHCP 서버에서 자동으로 IP 주소를 가져오는 것이다.
IP 주소뿐만 아니라 서브넷 마스크, 기본 게이트웨이, DNS 서버까지 할당할 수 있다. 
<br/>

단어 그대로 동적으로 호스트를 설정하는 규약  
IP 주소를 네트워크에 연결된 장치에 자동으로 할당한다.  
<br/>  

### 동작 과정
컴퓨터가 네트워크에 연결할 때 IP 주소를 요청한다. 요청은 DHCP 서버로 전달되고, 서버에서 주소를 할당하고 
주소의 이용을 모니터링한다. 그래서 연결이 해제되면 주소를 가져온다. 가져온 IP는 다시 다른 장치에 재할당 할 수 있다.  
![image](https://github.com/hong-gp/study/assets/127091213/22854f61-38d3-494d-80e2-b1ed30d7f639)

<br/>

DHCP를 통해 받은 IP 주소는 영구적이지 않고 임대하는 것이다.  
DHCP 서버는 제한된 범위의 IP 주소를 가지고 있다. 이 범위에서 주소를 할당해주고 연결이 해제되었을 때 
IP 주소를 풀로 다시 가져오고 임대 시간이 지나면 시간을 연장한다. 
<br/>

### 장점
- 동일한 IP 주소를 이용하는 두 명의 사용자 사이의 충돌 방지
- 사용자는 네트워크 범위 내에서 어디서든지 인터넷을 사용할 수 있다.

<br/>

## NAT(Network Address Translation)
네트워크 주소 변환을 의미한다. 라우터에서 사용되는 서비스이며
IP 주소를 다른 주소로 변환하는 목적이 있다.
제한된 양의 IP를 주소를 보존하는 것이다.
pubic IP, private IP
public IP는 공개적으로 등록되어있고, 인터넷에 접속하려면 Public IP 주소가 있어야한다.  
private IP는 공개적이지 않고 사설 IP를 사용하는 경우에는 내부적인 통신(LAN)을 하는 경우 사용할 수 있다.  
<br/>

외부와 통신할 때 사설 IP가 공용 IP로 변환되어서 사용할 수 있고 외부에서 컴퓨터와 통신할 때는 
공용 IP로 받아서 사설 IP로 변환해 전달한다.  
![image](https://github.com/hong-gp/study/assets/127091213/85f4b64b-9262-446c-8f35-c484cced8443)

<br/>

카페에서 A, B, C가 있고 와이파이를 연결하면 A, B, C는 각각 사설 IP를 할당 받는다. 
외부와 통신할 떄는 같은 공인 IP를 사용하게 된다. A가 웹툰을 본다고 하면 공인 IP로 변환되어서 웹툰에 요청을 한다.
웹툰에서는 공인 IP를 보고 응답을 하고 데이터는 라우터가 처리한다.
<br/>

### 장점
- 하나의 공인 IP주소를 사용하려 여러대의 호슽트가 인터넷을 사용할 수 있기에 부족한 공인 IP를 절약할 수 있다.
- 사설 IP 주소는 외부에서 직접 접근할 수 없으므로, 내부 장치들을 보호
<br/>

### 게이트웨이
한 네트워크(segment)에서 다른 네트워크로 이동하기 위하여 거쳐야 하는 지점  
서로 다른 네트워크 대역끼리 통신을 하기위해서는 게이트웨이를 거쳐야 한다.
<br/>

## IPv6
미래에는 NAT가 필요없을 거라고 한다. IPv6가 있기 때문이다. 
IPv6를 사용하면 340간 개의 IP 주소를 생성할 수 있기 때문에 전 세계에 모든 단말기에 자체 공용 IP 주소를 할당받을 수 있다.  
(일, 십, 백, 천, 만, 억, 조, 경, 해, 자, 양, 구, 간)
<br/>

128비트로 16비트씩 나누어 16진수로 표현한다.
![image](https://github.com/hong-gp/study/assets/127091213/84f2c68d-273d-4213-806f-fb9ea61a896d)
<br/>


---
### 참고
- https://www.geeksforgeeks.org/introduction-of-classful-ip-addressing/
- https://baebalja.tistory.com/474
- https://www.youtube.com/watch?v=ThdO9beHhpA
- https://nordvpn.com/ko/blog/what-is-dhcp/
