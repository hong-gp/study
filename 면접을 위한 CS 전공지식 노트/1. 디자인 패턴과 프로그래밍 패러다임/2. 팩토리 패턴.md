## 팩토리 패턴(Factory Pattern)

### 구현
```java
public interface DB {
    abstract int execute(String sql);
    abstract void setUrl(String url);
}
```
```java
public class MariaDB implements DB {
    private String url;

    @Override
    public int execute(String sql) {
        if (url == null) {
            throw new NullPointerException("db driver not found exception");
        }

        if (sql.equals("select")) {
            System.out.println("query execute : " + url + sql);
            return 1;
        } else {
            System.out.println("query fail : syntax error");
            return -1;
        }
    }

    @Override
    public void setUrl(String url) {
        this.url = url;
    }
}

public class OracleDB implements DB {
    private String url;

    @Override
    public int execute(String sql) {
        if (url == null) {
            throw new NullPointerException("db driver not found exception");
        }

        if (sql.equals("select")) {
            System.out.println("query execute : " + url + sql);
            return 1;
        } else {
            System.out.println("query fail : syntax error");
            return -1;
        }
    }

    @Override
    public void setUrl(String url) {
        this.url = url;
    }
}
```
```java
public class App {
    public static void main(String[] args) {
        DB mariaDB = new MariaDB();
        mariaDB.setUrl("jdbc:mariadb://");
        mariaDB.execute("select");

        DB oracleDB = new OracleDB();
        oracleDB.setUrl("jdbc:oracle://");
        oracleDB.execute("select");
    }
}
```
데이터 베이스를 선택하고 실행하는 서비스를 이렇게 작성할 수 있다.  
이 코드의 문제점은 객체를 생성할 때마다 url을 작성해야해서 오타를 입력할 수 있고, 
`setUrl` 하기전에 `execute`를 하는 경우에 실행 순서에 따라 오류가 발생할 수 있다.  
<br/>

이를 해결하기 위해 팩토리 패턴을 도입하자.  
```java
public class DBFactory {

    public DB createDB(String protocol) {
        if (protocol.equals("maria")) {
            DB mariaDB = new MariaDB();
            mariaDB.setUrl("jdbc:mariadb://");
            return mariaDB;
        } else if (protocol.equals("oracle")) {
            DB oracleDB = new OracleDB();
            oracleDB.setUrl("jdbc:oracle://");
            return oracleDB;
        } else {
            throw new NullPointerException("db driver not found exception");
        }
    }
}
```
```java
public class App {
    public static void main(String[] args) {
        DBFactory dbFactory = new DBFactory();

        DB mariaDB = dbFactory.createDB("maria");
        mariaDB.execute("select");

        DB oracleDB = dbFactory.createDB("oracle");
        oracleDB.execute("select");
    }
}
```
mariaDB 객체를 클라이언트에서 몰라도되고, 메소드 순서를 신경쓰기 않을 수 있다.  
그리고 간단한 문자열로 DB를 생성할 수 있다.

> https://www.youtube.com/watch?v=5JTXZ-5kqwY&list=PL93mKxaRDidEhEcufGexy99nAWGesLBch&index=9


## 팩토리 메소드 패턴(Factory Method)
객체 생성을 위한 인터페이스를 정의하고, 어떤 클래스의 인스턴스를 생성할지에 대한 처리는
서브 클래스가 결정하는 패턴
객체가 생성되는 과정을 숨겨주는 패턴  
<br/>
